'use client'
import React, { ReactNode, FC } from 'react'
import { Box, Typography } from "@mui/material"
import Image from "next/image"
import { useEffect, useState } from "react"
import { useTrail, a } from '@react-spring/web'

const Trail: FC<{ open: boolean, children: ReactNode }> = ({ open, children }) => {
    const items = React.Children.toArray(children)
    const trail = useTrail(items.length, {
        config: { mass: 5, tension: 2000, friction: 200 },
        opacity: open ? 1 : 0,
        x: open ? 0 : 20,
        height: open ? 30 : 0,
        from: { opacity: 0, x: 20, height: 0 },
    })
    return (
        <div>
            {trail.map(({ height, ...style }, index) => (
                <a.div key={index} style={style}>
                    <a.div style={{ height }}>{items[index]}</a.div>
                </a.div>
            ))}
        </div>
    )
}


export default function Loader() {
    const [loading, setLoading] = useState(true)
    const [textOpen, setTextOpen] = useState(false)

    useEffect(() => {
        setTimeout(() => setTextOpen(true), 600)
        setTimeout(() => {
            setLoading(false)
        }, 1500)
    }, [])

    return (
        <Box
            className='w-screen fixed left-0 top-0 flex items-center justify-center bg-white transition-opacity duration-500 pointer-events-none'
            sx={{
                opacity: loading ? 1 : 0,
                height: '100vh',
                zIndex: 10000000
            }}
        >
            <Box
                className='flex flex-col items-center justify-center gap-4'
            >
                <Image
                    id='loader-logo'
                    src='/logo/logo.svg'
                    width={200}
                    height={129}
                    alt='Logo'
                />
                <Trail open={textOpen}>
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 301.682 59.526" className='w-full h-[30px]'>
                        <path className="logo-text" d="m290.425,29.128c1.307,0,2.315-.571,3.024-1.713.71-1.142,1.065-2.686,1.065-4.632s-.355-3.49-1.065-4.633c-.709-1.142-1.718-1.713-3.024-1.713h-2.297v12.692h2.297Zm-2.297,22.592h-7.058V9.392h10.082c3.436,0,6.05,1.28,7.842,3.84,1.792,2.559,2.688,5.743,2.688,9.551s-.896,6.991-2.688,9.551c-1.792,2.56-4.406,3.84-7.842,3.84h-3.024v15.548-.002Zm-16.33,0h-6.676V16.436h-5.352v-7.044h17.38v7.044h-5.352v35.284h0Zm-16.941,0h-7.058v-18.277h-7.169v18.277h-7.058V9.392h7.058v17.071h7.169V9.392h7.058v42.328Zm-26.102,0h-16.356V9.392h16.356v7.044h-9.298v10.217h8.906v7.044h-8.906v10.978h9.298v7.044h0Zm-26.998,7.806v-7.806h-17.14V9.392h7.058v35.284h7.17V9.392h7.057v35.284h2.913v14.85h-7.058ZM165.91,2.538c-1.68,2.665-3.996,3.998-6.945,3.998-2.875,0-5.19-1.333-6.946-3.998l2.969-2.538c.896,1.565,2.222,2.348,3.977,2.348s3.081-.783,3.977-2.348l2.969,2.538h0Zm-10.866,49.181h-6.666V9.392h7.114v22.909l7.114-22.909h7.057v42.328h-7.057v-23.734l-7.562,23.734h0Zm-27.11,0h-6.666V9.392h7.114v22.909l7.113-22.909h7.058v42.328h-7.058v-23.734l-7.561,23.734h0Zm-9.746,0h-8.01l-5.881-16.119-2.353,5.331v10.788h-7.057V9.392h7.057v19.546l7.842-19.546h7.73l-9.13,19.927,9.802,22.401h0Zm-36.8.761c-3.921,0-6.852-1.988-8.794-5.965s-2.913-9.287-2.913-15.928.971-11.952,2.913-15.929,4.873-5.965,8.794-5.965c1.419,0,2.689.285,3.809.857,1.12.571,2.036,1.396,2.745,2.475.71,1.078,1.27,2.126,1.681,3.141.41,1.015.784,2.179,1.12,3.49l-5.601,2.348c-.448-1.777-.943-3.089-1.484-3.935-.542-.846-1.298-1.269-2.269-1.269-2.987,0-4.481,4.929-4.481,14.787s1.494,14.786,4.481,14.786c1.942,0,3.211-2.052,3.809-6.156l5.657,2.348c-1.605,7.277-4.761,10.915-9.466,10.915h-.001Zm-19.548-.761h-7.058V16.436h-5.657v-7.044h18.372v7.044h-5.657v35.284h0Zm-15.627,0h-16.356V9.392h16.356v7.044h-9.298v10.217h8.906v7.044h-8.906v10.978h9.298v7.044ZM11.597,30.904c-.373,6.304-1.475,10.894-3.305,13.771h8.009v-28.24h-3.921l-.784,14.469h0ZM.002,59.525v-14.152c.934-.212,1.634-.55,2.1-1.015s.934-1.724,1.4-3.776c.467-2.052.812-5.129,1.036-9.233l1.344-21.958h17.476v35.284h2.913v14.85h-7.058v-7.806H7.058v7.806H0h.002Z" />
                    </svg>
                    <svg className='w-52 h-24 mx-auto' xmlns="http://www.w3.org/2000/svg" viewBox="0 0 524.859 185.578">
                        <path className="logo-text" d="m411.601,182.574c-.717-.033-1.805-.114-3.253-.227-1.462-.114-2.522-.163-3.196-.163-.702,0-1.777.049-3.21.163-1.448.113-2.522.195-3.239.227v-59.816c-4.701,0-10.032.455-15.993,1.38.287-2.306.416-3.702.416-4.189,0-.471-.129-1.834-.416-4.108h44.283c-.086.601-.158,1.12-.244,1.542-.072.439-.144.893-.186,1.38-.043.487-.072.876-.072,1.185s.029.715.072,1.218.115.975.186,1.413c.086.438.158.958.244,1.558-6.75-.925-11.881-1.38-15.392-1.38v59.816h0Zm-90.113-66.733c.946.097,1.791.195,2.507.276.717.097,1.434.163,2.15.227.717.049,1.304.081,1.777.081s1.089-.032,1.834-.081c.731-.065,1.462-.13,2.15-.227.702-.081,1.534-.179,2.48-.276v45.69c2.622-3.15,5.431-6.706,8.426-10.684,2.995-3.962,5.847-7.891,8.584-11.739,2.723-3.864,5.503-7.891,8.297-12.08,2.809-4.189,5.274-7.988,7.367-11.381.573.065,1.49.097,2.752.097,1.72,0,2.98-.033,3.783-.097v66.927c-.688-.033-1.748-.114-3.21-.227-1.448-.114-2.551-.163-3.325-.163-.674,0-1.72.049-3.153.163-1.419.113-2.493.195-3.21.227v-46.08c-2.522,3.247-5.059,6.609-7.624,10.067-2.565,3.475-5.489,7.518-8.785,12.145-3.296,4.611-6.305,8.913-9.029,12.891-2.723,3.962-5.159,7.632-7.337,10.976-.631-.065-1.519-.097-2.666-.097-1.648,0-2.894.032-3.769.097v-66.733h0Zm-26.226,59.345c-1.648-5.731-3.511-11.723-5.575-17.958-2.064-6.235-4.586-13.931-7.581-23.072-6.463,18.007-11.106,31.678-13.915,41.03,1.318.049,3.282.13,5.89.227s4.958.146,7.079.146c2.293,0,4.859-.049,7.696-.146,2.852-.097,4.987-.178,6.406-.227h0Zm-34.38-.016c2.494-6.56,4.471-11.82,5.948-15.782,1.476-3.946,3.196-8.638,5.159-14.077,1.963-5.424,3.812-10.7,5.546-15.799,1.748-5.114,3.267-9.725,4.572-13.866.502,0,1.133.065,1.892.195.745.13,1.319.195,1.72.195.444,0,1.046-.065,1.82-.195.774-.13,1.39-.195,1.863-.195,5.675,17.617,12.468,37.458,20.393,59.524h4.127c-.344,3.069-.53,4.79-.53,5.163,0,1.608.186,3.361.53,5.245h-1.304c-1.032-1.429-2.78-2.371-5.245-2.777-2.465-.406-5.403-.617-8.828-.617h-25.38c-3.855,0-6.994.195-9.43.584-2.451.39-4.199,1.332-5.259,2.809h-1.304c.301-1.445.444-3.199.444-5.245,0-1.331-.143-3.053-.444-5.163h3.711-.001Zm-31.127-10.326c-1.161-2.809-2.866-6.43-5.159-10.879s-4.715-8.995-7.28-13.639c-2.566-4.66-5.088-9.271-7.596-13.866-2.494-4.594-4.357-8.134-5.589-10.618,1.147.097,2.136.179,2.938.26.817.081,1.663.162,2.566.227.888.065,1.634.097,2.221.097.573,0,1.29-.032,2.15-.081.86-.065,1.72-.13,2.594-.227.86-.081,1.863-.179,3.009-.276.674,1.559,2.15,4.579,4.443,9.06,2.278,4.498,4.643,9.076,7.051,13.785,2.422,4.692,4.085,8.053,5.002,10.083.802-1.364,1.791-3.361,2.966-5.975,1.175-2.614,2.494-5.715,3.956-9.287,1.461-3.572,2.852-7.031,4.156-10.342,1.29-3.329,2.25-5.764,2.866-7.323,1.39.195,2.795.293,4.228.293,1.29,0,2.651-.098,4.113-.293-2.322,4.676-5.561,11.593-9.716,20.75-4.142,9.141-8.083,18.088-11.809,26.823-3.726,8.751-6.263,15.133-7.624,19.159-.258-.033-.817-.114-1.662-.227-.846-.114-1.491-.163-1.949-.163-.43,0-1.075.049-1.921.146-.86.098-1.447.147-1.777.147,1.089-2.159,2.436-5.115,4.055-8.849,1.634-3.75,2.881-6.673,3.769-8.783v-.002Zm-51.477-16.854c2.523-.13,4.414-.357,5.661-.682,2.637-.812,4.572-2.419,5.804-4.79,1.247-2.371,1.863-5.18,1.863-8.443,0-3.815-.759-6.917-2.293-9.304-1.533-2.387-3.439-3.572-5.704-3.572h-5.331v26.791h0Zm0,34.584c-.745-.033-1.82-.114-3.239-.227-1.419-.114-2.494-.163-3.224-.163s-1.82.049-3.225.163c-1.419.113-2.479.195-3.21.227v-66.733h21.167c6.033,0,10.605,1.38,13.714,4.124,3.11,2.761,4.672,6.869,4.672,12.34,0,5.504-1.104,9.823-3.296,12.94-2.207,3.117-5.245,5.277-9.129,6.446s-8.627,1.77-14.231,1.77v29.112h.001Zm-56.579-32.051c-3.726,0-7.266.26-10.576.78,0-.471.072-1.169.215-2.111.129-.926.201-1.624.201-2.095,0-.406-.072-1.072-.201-2.013-.143-.926-.215-1.624-.215-2.062,4.6.585,8.126.877,10.576.877h19.419c-.344-3.199-1.003-6.235-1.949-9.076-.96-2.857-2.236-5.391-3.855-7.648-1.62-2.24-3.583-4.01-5.919-5.309-2.336-1.283-4.987-1.932-7.968-1.932-2.694,0-5.345.828-7.954,2.468-2.608,1.656-4.715,3.815-6.32,6.478h-1.189c-.315-1.575-.645-3.312-.989-5.195-.358-1.9-.674-3.507-.989-4.822,2.407-1.51,5.202-2.679,8.369-3.507,3.182-.844,6.234-1.266,9.158-1.266,4.815,0,9.287.747,13.4,2.241,4.128,1.51,7.753,3.783,10.877,6.819,3.124,3.053,5.575,6.917,7.323,11.626,1.763,4.692,2.637,10.132,2.637,16.318,0,4.92-.802,9.401-2.407,13.428-1.605,4.042-3.869,7.517-6.807,10.424-2.938,2.922-6.392,5.147-10.347,6.689-3.956,1.542-8.226,2.305-12.783,2.305-6.507,0-12.181-1.396-17.025-4.189l-1.891-8.394,1.132-.569c1.963,2.128,4.371,3.881,7.223,5.245,2.852,1.38,5.575,2.062,8.169,2.062,4.228,0,7.882-1.152,10.992-3.474,3.096-2.306,5.446-5.554,7.065-9.743,1.605-4.172,2.408-8.962,2.408-14.353h-19.777l-.003-.002ZM480.906.195c5.403,6.105,11.394,9.157,17.971,9.157,6.778,0,12.912-3.117,18.416-9.352l3.367,4.984c-2.021,2.273-4.242,4.222-6.664,5.845-2.422,1.624-4.93,2.825-7.524,3.637-2.594.812-5.231,1.218-7.925,1.218-3.855,0-7.596-.844-11.221-2.517-3.611-1.689-6.937-4.222-9.946-7.615l3.525-5.358h.001Zm-8.154,16.773c.945.097,1.791.195,2.508.276s1.433.163,2.15.211c.716.065,1.304.081,1.777.081s1.089-.017,1.834-.081c.731-.049,1.462-.13,2.15-.211.702-.081,1.534-.179,2.48-.276v45.674c2.623-3.15,5.431-6.706,8.426-10.684,2.995-3.962,5.847-7.891,8.584-11.739,2.723-3.865,5.503-7.891,8.297-12.08,2.809-4.189,5.274-7.989,7.366-11.382.573.081,1.49.114,2.752.114,1.72,0,2.981-.033,3.783-.114v66.928c-.688-.033-1.748-.114-3.21-.228-1.447-.114-2.551-.162-3.325-.162-.674,0-1.72.049-3.153.162-1.419.114-2.493.195-3.21.228v-46.08c-2.523,3.247-5.059,6.608-7.624,10.067-2.565,3.475-5.489,7.518-8.785,12.145-3.296,4.611-6.305,8.914-9.028,12.892-2.723,3.962-5.159,7.631-7.338,10.976-.63-.065-1.519-.098-2.666-.098-1.648,0-2.894.033-3.769.098V16.968h0Zm-66.897-.016c.946.097,1.791.195,2.508.276.717.097,1.433.162,2.15.227.716.049,1.304.081,1.777.081s1.089-.033,1.834-.081c.731-.065,1.462-.13,2.15-.227.703-.081,1.533-.178,2.479-.276v45.69c2.623-3.15,5.432-6.706,8.427-10.684,2.995-3.962,5.847-7.891,8.584-11.739,2.723-3.865,5.504-7.891,8.298-12.08,2.809-4.189,5.274-7.989,7.366-11.382.573.065,1.49.098,2.752.098,1.72,0,2.981-.033,3.783-.098v66.928c-.688-.033-1.748-.114-3.21-.228-1.448-.114-2.551-.162-3.325-.162-.674,0-1.72.049-3.153.162-1.419.114-2.494.195-3.21.228v-46.08c-2.522,3.247-5.059,6.608-7.624,10.067-2.566,3.475-5.489,7.518-8.785,12.145-3.296,4.611-6.306,8.914-9.029,12.892-2.723,3.962-5.159,7.631-7.337,10.976-.631-.065-1.519-.098-2.666-.098-1.648,0-2.895.033-3.769.098V16.952Zm-52.552,0c.272.016,1.19.113,2.794.308,1.591.178,2.809.276,3.64.276.473,0,1.089-.033,1.834-.081.731-.065,1.462-.13,2.15-.227.702-.081,1.533-.178,2.479-.276v30.492c7.61-9.904,15.062-20.068,22.356-30.492.645.097,1.218.195,1.705.276.502.097,1.018.162,1.577.227.545.049.989.081,1.361.081.559,0,1.419-.098,2.594-.276,1.175-.195,1.835-.292,1.964-.308v.763c-3.927,4.238-8.026,8.995-12.31,14.272-4.271,5.277-7.596,9.531-9.96,12.729l23.99,37.701v1.267c-.759-.033-1.992-.114-3.711-.228-1.734-.114-2.924-.162-3.598-.162-.759,0-1.992.049-3.711.162-1.706.114-2.909.195-3.612.228l-18.644-30.882v30.882c-.745-.033-1.82-.114-3.239-.228s-2.494-.162-3.224-.162c-.688,0-1.748.049-3.153.162-1.404.114-2.493.195-3.282.228V16.951h0Zm-35.756,60.903c2.379,0,4.271-.243,5.661-.698,2.637-.828,4.572-2.419,5.804-4.79,1.247-2.371,1.863-5.196,1.863-8.459,0-3.799-.76-6.901-2.293-9.287-1.534-2.387-3.439-3.572-5.704-3.572h-5.331v26.806h0Zm0-32.164h8.255c6.034,0,10.605,1.38,13.729,4.124,3.11,2.761,4.672,6.868,4.672,12.34,0,7.907-2.078,13.411-6.219,16.496-4.142,3.101-9.487,4.644-16.036,4.644h-17.297V16.562c.731.033,1.748.097,3.067.211,1.332.113,2.45.179,3.367.179s2.035-.065,3.354-.179c1.332-.114,2.364-.178,3.11-.211v29.129h-.002Zm-78.935-28.739c.946.097,1.792.195,2.508.276.716.097,1.433.162,2.15.227.717.049,1.304.081,1.777.081s1.089-.033,1.834-.081c.731-.065,1.462-.13,2.15-.227.702-.081,1.533-.178,2.479-.276v26.4c7.137.325,11.522.471,13.141.471,1.318,0,5.704-.146,13.17-.471v-26.4c.946.097,1.777.195,2.465.276.702.097,1.404.162,2.121.227.731.049,1.319.081,1.777.081.516,0,1.161-.033,1.92-.098.774-.065,1.49-.146,2.164-.227.688-.081,1.505-.162,2.451-.259v66.733c-.688-.033-1.748-.114-3.21-.228-1.447-.114-2.551-.162-3.325-.162-.674,0-1.72.049-3.153.162-1.419.114-2.494.195-3.21.228v-32.538c-5.962-.26-10.347-.39-13.17-.39-3.053,0-7.423.13-13.141.39v32.538c-.745-.033-1.82-.114-3.239-.228-1.419-.114-2.494-.162-3.224-.162-.702,0-1.777.049-3.21.162-1.419.114-2.494.195-3.225.228V16.952h0Zm-11.006,0c-.287,2.37-.444,3.767-.444,4.189,0,.406.158,1.802.444,4.189-6.048-.909-12.697-1.364-19.949-1.364v21.043h9.029c2.422,0,5.947-.293,10.591-.877-.301,1.998-.444,3.361-.444,4.076,0,.666.143,2.078.444,4.205-3.353-.519-6.879-.779-10.591-.779h-9.029v24.647c7.251,0,13.901-.455,19.949-1.364-.287,2.387-.444,3.783-.444,4.189,0,.422.158,1.818.444,4.189h-32.847V16.952h32.847Zm-67.771.292c.23,0,.502-.016.831-.033.329-.032.659-.065,1.003-.113.329-.049.631-.097.888-.13.258-.049.588-.081.975-.113,1.92,5.91,3.64,11.122,5.145,15.636,1.519,4.498,3.411,10.067,5.718,16.708,2.293,6.641,4.099,11.804,5.431,15.506,1.318,3.703,3.569,10.002,6.764,18.883-1.061-.097-2.021-.195-2.866-.276-.845-.097-1.705-.162-2.565-.211-.874-.065-1.576-.098-2.121-.098s-1.261.033-2.164.098-1.763.146-2.594.227c-.817.081-1.763.162-2.823.259-.96-3.669-2.05-7.517-3.267-11.544-1.233-4.042-2.336-7.55-3.325-10.554-.989-3.003-2.364-7.144-4.127-12.437-1.777-5.293-3.282-9.856-4.514-13.688-6.965,19.111-12.296,35.185-15.994,48.223-1.361-.195-2.709-.292-4.041-.292s-2.651.097-3.941.292c2.436-6.445,4.658-12.34,6.693-17.714,2.021-5.358,3.984-10.652,5.89-15.831,1.892-5.179,3.812-10.553,5.732-16.123,1.935-5.553,3.812-11.252,5.661-17.065.086,0,.588.065,1.505.195s1.62.195,2.107.195h0Zm-52.953,40.234l-7.653-22.699-8.068,22.699h15.721Zm-18.057,5.943c-.502,1.689-1.204,3.978-2.121,6.819-.903,2.858-1.691,5.374-2.322,7.55-.645,2.159-1.175,4.092-1.576,5.796-.372-.032-1.018-.097-1.949-.179-.931-.081-1.619-.113-2.078-.113-.473,0-1.146.033-2.05.113-.888.081-1.591.147-2.092.179l24.592-67.512c1.118.195,2.193.293,3.268.293,1.061,0,2.15-.097,3.268-.293l23.99,67.61c-.86-.033-2.107-.114-3.769-.228-1.662-.114-2.895-.162-3.726-.162-.817,0-2.049.049-3.683.162-1.633.114-2.837.195-3.625.228-2.594-9.401-4.629-16.156-6.105-20.264h-20.022ZM55.792,16.952c.129.016.645.113,1.534.308.888.178,1.548.276,2.006.276.301,0,.688-.033,1.133-.098.458-.065.874-.146,1.261-.227.387-.081.86-.162,1.405-.259.717,7.047,1.476,14.385,2.235,22.033.774,7.648,1.347,13.217,1.72,16.724.372,3.507.874,7.81,1.519,12.925.645,5.114,1.333,10.131,2.078,15.051-.831-.033-2.035-.114-3.626-.228-1.591-.114-2.78-.162-3.597-.162s-1.964.049-3.44.162c-1.49.114-2.637.195-3.439.228-.158-3.637-.372-7.42-.659-11.35-.287-3.929-.588-7.501-.889-10.716-.301-3.215-.616-6.559-.946-10.034-.329-3.491-.731-7.858-1.204-13.103-1.075,2.484-2.608,5.976-4.6,10.522-1.992,4.53-3.683,8.443-5.088,11.755-1.404,3.312-3.067,7.258-4.988,11.853-1.92,4.611-3.382,8.167-4.414,10.684h-3.267c-.932-2.306-2.379-5.78-4.386-10.456-1.992-4.66-3.525-8.248-4.615-10.716-1.089-2.484-2.737-6.267-4.944-11.366-2.207-5.082-3.84-8.849-4.887-11.3-2.207,19.273-3.411,34.016-3.611,44.229-.445-.033-1.118-.114-2.021-.228-.889-.114-1.562-.162-2.006-.162-.459,0-1.132.049-1.992.162-.86.114-1.548.195-2.064.228,1.447-8.817,2.794-18.137,4.056-27.943,1.261-9.807,2.852-22.731,4.801-38.789.53.097.975.178,1.347.259.358.081.745.163,1.147.227.415.065.76.098,1.032.098s.616-.033,1.06-.098.846-.146,1.19-.227c.344-.081.774-.162,1.275-.259,1.92,4.644,3.469,8.345,4.658,11.122,1.175,2.761,2.737,6.381,4.686,10.83,1.949,4.449,3.812,8.67,5.604,12.697,1.777,4.027,3.425,7.728,4.915,11.138.43-.942,1.72-3.767,3.841-8.459,2.135-4.676,4.113-9.092,5.976-13.233,1.849-4.14,3.669-8.297,5.446-12.469,1.777-4.157,3.367-8.038,4.758-11.626v-.003Z" />
                    </svg>
                </Trail>
            </Box>
        </Box >
    )
}